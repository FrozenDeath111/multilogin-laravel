# Multilogin-laravel

A multi login system from Ecommerce to FoodPanda for both Api and Web system. Authenticated user in Ecommerce can go to FoodPanda without needing to give credentials. Built with Laravel 12, Mysql, Tailwindcss

## Description

This is a multi auth system to have seemless auto login to other acceptable application via a link. It is done 2 ways.

- **Api System** For api system laravel Passport is used. Here lets say Ecom app has a user A. He logs in with valid credential and get access_token. Now a can use that access token to fetch data from FoodPanda. In this instance the authentication provider is Ecom. Basic flow being, A Having AT(access token) from Ecom, It request with same AT to FoodPanda. FoodPanda then send that token to Ecom to varify A, after varification it sends the data. Full backend system only.

- **Short Lived Code System** It is implemented in web route. When A authenticate in Ecom it can click a button to go to FoodPanda to see his orders. When he clicks, Ecom generates a short lived cached code to redirects to FoodPanda, now FoodPanda get that and send that code via post to varify the code from Ecom. Ecom varifies the code and sends user info. FoodPanda getting the varification it logs in A and gives show him the Data.

## Requirements

Before you begin, ensure you have the following installed:

- **PHP:** 8.2 or higher
- **Composer:** Latest version
- **Database:** MySQL 8.0+

## How to Start

Follow these steps to get your development environment up and running.

### 1. Clone the Repository

```bash
git clone https://github.com/FrozenDeath111/multilogin-laravel.git
cd multilogin-laravel
```

### 2. Setup environment

```bash
composer install
cp .env.example .env
php artisan key:generate
php artisan passport:keys
```

set the DB configure in .env file, both db can be different for both app but user table must have email, password, name fields.
!!! It is very important to note that -- for api route to work, private key and public key generated by passport:key should be same in both, Also API_KEY also be same as it effects encryption. for web based auth its not necessary as it does not use passport.

```bach
php artisan migrate
php artisan serve
```

Frontend is only available for Short Lived Code system as its server rendered. Passport api system does not have frontend for time constraint.
Run both server with **php artisan serve** would start the process. At this moment Ecom should be the starting app, It is not Bi-directional. But making it is very simple based on the way used.

### 3 Workflow

Workflow described in description. There is a docs folder that contains video and basic design for the system.

### 4 Finally

There are some residual file that is not needed. Basically it was used to implement Laravel Socialite with custom OAuth provider. It will take more that to implemented so scapred at this moment.
